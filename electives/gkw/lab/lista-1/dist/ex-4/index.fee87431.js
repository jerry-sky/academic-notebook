!function(){class t{constructor(t,e){this.x=t,this.y=e}}class e extends t{constructor(t,e,s){super(t,e),this.x=t,this.y=e,this.z=s}}class s{constructor(t,e){this.begin=t,this.end=e}}class i{constructor(t,i,h,o,r,n){this.middle=new e(t,i,h);const c=[new e(t-o/2,i-r/2,h-n/2),new e(t-o/2,i+r/2,h-n/2),new e(t+o/2,i+r/2,h-n/2),new e(t+o/2,i-r/2,h-n/2),new e(t-o/2,i-r/2,h+n/2),new e(t-o/2,i+r/2,h+n/2),new e(t+o/2,i+r/2,h+n/2),new e(t+o/2,i-r/2,h+n/2)];this._lines=[new s(c[0],c[1]),new s(c[1],c[2]),new s(c[2],c[3]),new s(c[3],c[0]),new s(c[0],c[4]),new s(c[1],c[5]),new s(c[2],c[6]),new s(c[3],c[7]),new s(c[4],c[5]),new s(c[5],c[6]),new s(c[6],c[7]),new s(c[7],c[4])],this._vertices=c,this.maxPoints=[c[0],c[6]]}get lines(){return this._lines}get vertices(){return this._vertices}isInside(t){const e=t.x,s=t.y,i=t.z,h=this.maxPoints[0],o=this.maxPoints[1];return e>=h.x&&e<=o.x&&s>=h.y&&s<=o.y&&i>=h.z&&i<=o.z}rotateX(t){const e=Math.cos(t),s=Math.sin(t);this.vertices.forEach((t=>{const i=(t.y-this.middle.y)*e-(t.z-this.middle.z)*s,h=(t.y-this.middle.y)*s+(t.z-this.middle.z)*e;t.y=i+this.middle.y,t.z=h+this.middle.z}))}rotateY(t){const e=Math.cos(t),s=Math.sin(t);this.vertices.forEach((t=>{const i=(t.z-this.middle.z)*s-(t.x-this.middle.x)*e,h=(t.z-this.middle.z)*e+(t.x-this.middle.x)*s;t.x=i+this.middle.x,t.z=h+this.middle.z}))}}class h{static FocalLength=100;static Project3DInto2D(e,s,i){const o=e.x*(h.FocalLength/e.z)+.5*s,r=e.y*(h.FocalLength/e.z)+.5*i;return new t(o,r)}}const o=document.getElementById("canvas"),r=new class{cuboids=[];constructor(t){this._width=t.width,this._height=t.height,this.context=t.getContext("2d"),this.reset(),this.context.lineWidth=5}get width(){return this._width}get height(){return this._height}setToPrimaryColour(){this.context.strokeStyle="#000000"}setToSecondaryColour(){this.context.strokeStyle="#ff00ff"}redraw(){const t=this.context;t.clearRect(0,0,this._width,this._height),this.setToPrimaryColour(),this.cuboids.forEach((e=>{e.lines.forEach((e=>{const s=h.Project3DInto2D(e.begin,this._width,this._height),i=h.Project3DInto2D(e.end,this._width,this._height);t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(i.x,i.y),t.closePath(),t.stroke()}))})),this.targetCuboid&&(this.setToSecondaryColour(),this.targetCuboid.lines.forEach((e=>{const s=h.Project3DInto2D(e.begin,this._width,this._height),i=h.Project3DInto2D(e.end,this._width,this._height);t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(i.x,i.y),t.closePath(),t.stroke()})));const e=h.Project3DInto2D(this._currentPos,this._width,this._height);this.setToSecondaryColour(),t.beginPath(),this.context.arc(e.x,e.y,10,0,2*Math.PI),t.stroke(),t.closePath()}get currentPos(){return this._currentPos}reset(){this._currentPos=new e(0,0,0),this.cuboids=[],this.redraw()}resetPlayer(t){this._currentPos=t}checkIfPlayerWon(){return!(!this.targetCuboid||!this.targetCuboid.isInside(this._currentPos))}movePlayer(t,e){this._currentPos.x+=t,this._currentPos.y+=e;for(let s=0;s<this.cuboids.length;s++){if(this.cuboids[s].isInside(this._currentPos))return this._currentPos.x-=t,void(this._currentPos.y-=e)}}}(o);function n(t){return Math.floor(Math.random()*t)}const c=-150;for(let t=0;t<30;t++){const t=new i(n(r.width)-r.width/2,n(r.height)-r.height/2,c,50,50,25);r.cuboids.push(t)}r.resetPlayer(new e(0,-r.height/2,c)),r.targetCuboid=new i(0,r.height/2,c,50,50,7.5),document.addEventListener("keydown",(t=>{switch(t.key){case"ArrowUp":r.movePlayer(0,10);break;case"ArrowDown":r.movePlayer(0,-10);break;case"ArrowLeft":r.movePlayer(10,0);break;case"ArrowRight":r.movePlayer(-10,0)}r.redraw(),r.checkIfPlayerWon()&&(alert("Youâ€™ve won!"),location.reload())})),r.redraw()}();
//# sourceMappingURL=index.fee87431.js.map
