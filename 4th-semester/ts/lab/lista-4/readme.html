<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Jerry Sky" />
  <title>Lista-4</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&display=swap" rel="stylesheet">
</head>
<body>
<header id="title-block-header">
<h1 class="title">Lista-4</h1>
<p class="author">
    <span>by </span>
    <span class="author">Jerry Sky</span>
</p>
</header>
<hr />
<ul>
<li><a href="#the-original-task-in-polish">The original task <em>(in polish)</em></a>
<ul>
<li><a href="#translated-task">Translated task</a></li>
</ul></li>
<li><a href="#useful-commands">Useful commands</a></li>
<li><a href="#setting-up">Setting up</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#other-caveats">Other caveats</a></li>
<li><a href="#devices-configs">Devices' configs</a>
<ul>
<li><a href="#r5-last-router-before-cloud"><code>R5</code> (last router before <code>Cloud</code>)</a></li>
<li><a href="#r6"><code>R6</code></a></li>
<li><a href="#r2"><code>R2</code></a></li>
<li><a href="#r3"><code>R3</code></a></li>
<li><a href="#pc-1"><code>PC-1</code></a></li>
<li><a href="#pc-2"><code>PC-2</code></a></li>
<li><a href="#pc-3"><code>PC-3</code></a></li>
</ul></li>
</ul>
<hr />
<h2 id="the-original-task-in-polish">The original task <em>(in polish)</em></h2>
<p><a href="#translated-task">»English«</a> &gt; 1. W symulatorze GNS3 skonfiguruj wirtualną sieć o podanej topologii, tak aby: &gt; <img src="original-task-image.svg" alt="simulation" /> &gt; 1. Wirtualna sieć była połączona z zewnętrzną („fizyczną”) siecią <code>Cloud</code>. &gt; 2. Ruter <code>R5</code> uzyskiwał dynamiczny adres IP z sieci <code>Cloud</code>. &gt; 3. Pozostałe urządzenia posiadały statyczne adresy w swoich sieciach. &gt; 4. Możliwe było wysyłanie komunikatów <code>ping</code> pomiędzy dowolna parą urządzeń sieci wirtualnej. &gt; 5. Możliwe było wysyłanie komunikatów <code>ping</code> z dowolnego urządzenia w sieci wirtualnej na zewnętrzny adres, np. <code>google.com</code>. &gt; 2. Ustaw przechwytywanie komunikatów w sieciach: <code>192.168.0.0</code>, <code>192.168.2.0</code>, <code>192.168.3.0</code>. &gt; 3. Przeanalizuj przechwycone komunikaty dla zapytania wysłanego z komputera PC2: <code>ping google.com</code>.</p>
<h3 id="translated-task">Translated task</h3>
<blockquote>
<ol style="list-style-type: decimal">
<li>In GNS3 simulation program create a virtual network with a given topology such that: <img src="original-task-image.svg" alt="simulation" /></li>
<li>the virtual network is connected with the outside „physical” network represented by device named <code>Cloud</code>.</li>
<li><code>R5</code> has a dynamic IP address given by <code>Cloud</code></li>
<li>other devices have their static IP address inside their local networks</li>
<li>all devices are able to communicate with each other via <code>ping</code></li>
<li>all devices are able to communicate with the outside world e.g. <code>google.com</code></li>
<li>Setup packet capture on networks <code>192.168.0.0.</code>, <code>192.168.2.0</code>, <code>192.168.3.0</code>.</li>
<li>Analyse captured packets sent and received due to executing <code>ping google.com</code> in the terminal of PC2.</li>
</ol>
</blockquote>
<h2 id="useful-commands">Useful commands</h2>
<ol style="list-style-type: decimal">
<li>After executing <code>conf t</code>:</li>
<li>After executing <code>int X</code>, where <code>X</code> is a network interface e.g. <code>f0/0</code>:
<ol style="list-style-type: decimal">
<li><code>no ip address</code> deletes current settings for chosen network interface</li>
</ol></li>
<li><code>do</code> execute a command like outside <code>conf t</code></li>
<li><code>sh</code> show (<code>show</code>):</li>
<li><code>ip route</code> currently active internet interfaces</li>
<li><code>access-list</code> views the list of IPs with their access mode</li>
</ol>
<h2 id="setting-up">Setting up</h2>
<p><strong>Important:</strong> in order for this simulation to run an image of the CISCO <code>c3725</code> router has to bo installed into GNS3. Download it from <a href="https://yaser-rahmati.gitbook.io/gns3/cisco-ios-images-for-dynamips">here</a> or just run attached <a href="download-router-image.sh">bash script with <code>wget</code> in it</a>.</p>
<p>Obviously, on every computer the configuration of the <code>Cloud</code> will be different thus the gateway and the subnet will be different (hence they need to be reconfigured a little in order to work on your machine).<br />
However, the inside of this network of smaller networks should work out of the box. If it's not <a href="#devices-configs">below are setup commands</a> that have to be run consecutively in each device's terminal to be setup properly.</p>
<h2 id="testing">Testing</h2>
<p>After the setup you can test the simulated network. Open selected device's terminal and use <code>ping</code> to test the connection to another device in the network. DNS is set to either <code>8.8.8.8</code> (Google) or <code>1.1.1.1</code> so <code>ping</code>ing outside web should also not be a problem.</p>
<h2 id="other-caveats">Other caveats</h2>
<p>Devices marked as <code>PC-X</code> where <code>X</code> <span class="math inline">\(\in \{1,2,3\}\)</span> are not actual GNS3's <code>VPCS</code>s. They are the CISCO <code>c3725</code> routers with <code>ip routing</code> turned off so they <em>act</em> like a <code>VPCS</code>.<br />
<em>This is sufficient for testing purposes of this simulation.</em><br />
<em>(normal GNS3's <code>VPCS</code>s are genuinely broken)</em></p>
<h2 id="devices-configs">Devices' configs</h2>
<h3 id="r5-last-router-before-cloud"><code>R5</code> (last router before <code>Cloud</code>)</h3>
<pre><code>conf t
int f0/0
ip address dhcp
ip nat outside
no shut
end

conf t
ip domain-lookup
ip name-server 8.8.8.8
end

conf t
int f0/1
ip add 192.168.3.3 255.255.255.0
ip nat inside
no shut
end

conf t
router rip
version 2
no auto-summary
network 192.168.42.0
network 192.168.3.0
default-information originate
end

conf t
access-list 10 permit 192.168.1.0 0.0.254.255
access-list 10 permit 192.168.2.0 0.0.253.255
access-list 10 permit 192.168.3.0 0.0.252.255
access-list 10 permit 192.168.4.0 0.0.251.255

ip nat inside source list 10 interface f0/0 overload
end</code></pre>
<h3 id="r6"><code>R6</code></h3>
<pre><code>conf t
int f0/0
no shut
ip add 192.168.3.1 255.255.255.0
end

conf t
ip domain-lookup source-interface f0/0
ip name-server 8.8.8.8
end

conf t
int f1/0
no shut
ip add 192.168.1.1 255.255.255.0
end

conf t
int f0/1
no shut
ip add 192.168.4.1 255.255.255.0
end

conf t
router rip
version 2
no auto-summary
network 192.168.1.0
network 192.168.4.0
network 192.168.3.0
end</code></pre>
<h3 id="r2"><code>R2</code></h3>
<pre><code>conf t
int f0/1
ip add 192.168.2.1 255.255.255.0
no shut
int f0/0
ip add 192.168.4.2 255.255.255.0
no shut
end

conf t
router rip
version 2
no auto-summary
network 192.168.2.0
network 192.168.4.0
end

conf t
ip domain-lookup
ip name-server 8.8.8.8
end</code></pre>
<h3 id="r3"><code>R3</code></h3>
<pre><code>conf t
int f0/0
ip add 192.168.2.3 255.255.255.0
no shut
end

conf t
router rip
version 2
no auto-summary
network 192.168.2.0
end

conf t
ip domain-lookup
ip name-server 192.168.42.129
end
write memory</code></pre>
<h3 id="pc-1"><code>PC-1</code></h3>
<pre><code>conf t
no ip routing
int f0/0
ip add 192.168.1.2 255.255.255.0
no shut
exit
ip default-gateway 192.168.1.1
ip domain-lookup
ip name-server 8.8.8.8
end
write memory</code></pre>
<h3 id="pc-2"><code>PC-2</code></h3>
<pre><code>conf t
no ip routing
int f0/0
ip add 192.168.2.4 255.255.255.0
no shut
exit
ip default-gateway 192.168.2.1
ip domain-lookup
ip name-server 8.8.8.8
end
write memory</code></pre>
<h3 id="pc-3"><code>PC-3</code></h3>
<pre><code>conf t
no ip routing
int f0/0
ip add 192.168.2.5 255.255.255.0
no shut
exit
ip default-gateway 192.168.2.1
ip domain-lookup
ip name-server 8.8.8.8
end
write memory</code></pre>
</body>
</html>
